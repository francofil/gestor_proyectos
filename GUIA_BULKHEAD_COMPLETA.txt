================================================================================
                    PATRÃ“N BULKHEAD - GUÃA COMPLETA
             ImplementaciÃ³n en Gestor de Proyectos - API REST
================================================================================

ÃNDICE:
  2. CÃ³mo Funciona en Esta ImplementaciÃ³n
  3. Criterios para Rechazar Requests
  4. Paso a Paso: CÃ³mo Correr la AplicaciÃ³n
  5. Paso a Paso: CÃ³mo Probar el Bulkhead
  6. InterpretaciÃ³n de Resultados
  7. Evidencia para la TFU

================================================================================
2. CÃ“MO FUNCIONA EN ESTA IMPLEMENTACIÃ“N
================================================================================

La implementaciÃ³n tiene DOS NIVELES de aislamiento:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NIVEL 1: POOLS DE BD SEPARADOS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Cada mÃ³dulo tiene su propio pool de conexiones a la base de datos:    â”‚
â”‚                                                                         â”‚
â”‚  usersMasterPool      â†’ 10 conexiones mÃ¡ximas                          â”‚
â”‚  projectsMasterPool   â†’ 10 conexiones mÃ¡ximas                          â”‚
â”‚  tasksMasterPool      â†’ 10 conexiones mÃ¡ximas                          â”‚
â”‚  statisticsReplicaPoolâ†’ 5 conexiones mÃ¡ximas                           â”‚
â”‚                                                                         â”‚
â”‚  ARCHIVO: src/config/bulkheadPools.ts                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 NIVEL 2: LÃMITES DE CONCURRENCIA POR ENDPOINT           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Middleware que limita requests concurrentes que puede procesar         â”‚
â”‚  cada endpoint:                                                         â”‚
â”‚                                                                         â”‚
â”‚  /users       â†’ mÃ¡ximo 20 requests concurrentes                        â”‚
â”‚  /projects    â†’ mÃ¡ximo 20 requests concurrentes                        â”‚
â”‚  /tasks       â†’ mÃ¡ximo 15 requests concurrentes                        â”‚
â”‚  /statistics  â†’ mÃ¡ximo 10 requests concurrentes                        â”‚
â”‚                                                                         â”‚
â”‚  ARCHIVO: src/middleware/bulkhead.ts                                   â”‚
â”‚  CONFIGURACIÃ“N: config.json (secciÃ³n "bulkhead.concurrency")           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLUJO CUANDO LLEGA UNA REQUEST:

  1. Request llega a un endpoint (ej: GET /tasks)
  2. Middleware de Bulkhead intercepta la request
  3. Verifica el contador de requests concurrentes actuales
  4. Si current < limit:
     â†’ Acepta la request
     â†’ Incrementa el contador
     â†’ Procesa la operaciÃ³n
     â†’ Al terminar, decrementa el contador
  5. Si current >= limit:
     â†’ RECHAZA la request con 503 Service Unavailable
     â†’ Respuesta inmediata (no espera)
     â†’ Incrementa contador de rechazos


================================================================================
3. CRITERIOS PARA RECHAZAR UNA REQUEST
================================================================================

Una request es RECHAZADA cuando:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONDICIÃ“N: current >= limit                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  current = NÃºmero de requests actualmente en procesamiento             â”‚
â”‚  limit   = LÃ­mite mÃ¡ximo configurado para ese mÃ³dulo                   â”‚
â”‚                                                                         â”‚
â”‚  Ejemplo para /tasks (limit = 15):                                     â”‚
â”‚    â€¢ Requests 1-15: ACEPTADAS (current va de 0â†’15)                     â”‚
â”‚    â€¢ Request 16:    RECHAZADA (current = 15 >= limit = 15)             â”‚
â”‚    â€¢ Request 17:    RECHAZADA (current = 15 >= limit = 15)             â”‚
â”‚    â€¢ ...hasta que alguna de las 15 termine                             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CÃ“DIGO ESPECÃFICO (src/middleware/bulkhead.ts lÃ­neas 46-62):

  const acquire = (semaphore: BulkheadSemaphore): boolean => {
    if (semaphore.current < semaphore.limit) {
      semaphore.current++;
      semaphore.accepted++;
      return true;  // âœ… ACEPTADA
    }
    semaphore.rejected++;
    return false;   // ğŸš« RECHAZADA
  };

RESPUESTA DE RECHAZO:

  HTTP Status: 503 Service Unavailable
  
  Body:
  {
    "error": "Service Temporarily Unavailable",
    "message": "El mÃ³dulo tasks estÃ¡ procesando demasiadas requests. 
                Por favor, reintente en unos momentos.",
    "module": "tasks",
    "currentLoad": 15,
    "maxConcurrency": 15,
    "bulkheadActive": true
  }

Â¿POR QUÃ‰ 503 Y NO OTRO CÃ“DIGO?

  â€¢ 503 = Service Unavailable (temporalmente no disponible)
  â€¢ Indica al cliente que puede reintentar despuÃ©s
  â€¢ Es el cÃ³digo HTTP estÃ¡ndar para este escenario
  â€¢ Permite a balanceadores de carga redirigir trÃ¡fico
  â€¢ Respuesta RÃPIDA (100-300ms) vs timeout (30000ms)


================================================================================
4. PASO A PASO: CÃ“MO CORRER LA APLICACIÃ“N
================================================================================

REQUISITOS PREVIOS:
  â€¢ Docker Desktop instalado y corriendo
  â€¢ Node.js 20+ instalado
  â€¢ PowerShell o terminal

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

OPCIÃ“N A: CON DOCKER (Recomendado para TFU)

  Paso 1: Abrir PowerShell en la carpeta del proyecto
    
    cd C:\Users\stuff\Desktop\gestor_proyectos

  Paso 2: Levantar todos los servicios con Docker Compose
    
    docker-compose up -d

    â³ Esperar 30-60 segundos a que inicie todo

  Paso 3: Verificar que estÃ© corriendo
    
    curl http://localhost:3000/health

    âœ… DeberÃ­as ver:
    {
      "status": "healthy",
      "master": "connected",
      "replica": "connected",
      "bulkhead": "active"
    }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

OPCIÃ“N B: LOCAL (Para desarrollo)

  Paso 1: Levantar solo la base de datos con Docker
    
    docker-compose up db-master

  Paso 2: En otra terminal, instalar dependencias
    
    npm install

  Paso 3: Ejecutar la API en modo desarrollo
    
    npm run dev

    âœ… DeberÃ­as ver:
    âœ… Pools de Bulkhead inicializados correctamente
    âœ… ConexiÃ³n a BD MASTER establecida
    ğŸš€ Servidor corriendo en http://localhost:3000

================================================================================
5. PASO A PASO: CÃ“MO PROBAR EL BULKHEAD
================================================================================

OBJETIVO DE LA PRUEBA:
  Demostrar que cuando /tasks se satura, /projects sigue funcionando
  normalmente, comprobando el aislamiento del patrÃ³n Bulkhead.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PRUEBA AUTOMÃTICA (Recomendada):

  Abre una terminal PowerShell en la carpeta del proyecto:

    node tests/stress-test-tasks.js 100 http://localhost:3000

  Esto ejecutarÃ¡:
    â€¢ 100 requests concurrentes a GET /tasks
    â€¢ MedirÃ¡ cuÃ¡ntas se aceptan y cuÃ¡ntas se rechazan
    â€¢ MostrarÃ¡ latencias (P50, P95, P99)
    â€¢ IndicarÃ¡ si el Bulkhead estÃ¡ funcionando

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PRUEBA MANUAL (Paso a Paso):

  Terminal 1: Monitorear /projects (30 segundos)
    
    node tests/monitor-projects.js 30 http://localhost:3000

  Terminal 2: Bombardear /tasks (espera 5 segundos despuÃ©s de iniciar Terminal 1)
    
    node tests/stress-test-tasks.js 100 http://localhost:3000

  Terminal 3: Ver mÃ©tricas en tiempo real
    
    curl http://localhost:3000/bulkhead/metrics

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

VERIFICACIÃ“N DEL AISLAMIENTO:

  Durante o despuÃ©s del bombardeo, verificar que /projects funcione:

    curl http://localhost:3000/projects

  âœ… DeberÃ­a responder con:
    â€¢ Status 200 OK
    â€¢ Lista de proyectos
    â€¢ Sin errores
    â€¢ Latencia normal (<500ms)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CONSULTAR MÃ‰TRICAS FINALES:

    curl http://localhost:3000/bulkhead/metrics

  Buscar en la respuesta:

    "tasks": {
      "rejected": 55,      â† Requests rechazadas (Bulkhead activo)
      "accepted": 45,      â† Requests procesadas
      "utilizationPercent": 100
    },
    "projects": {
      "rejected": 0,       â† Sin rechazo (no afectado)
      "accepted": 60,
      "utilizationPercent": 5
    }


================================================================================
6. INTERPRETACIÃ“N DE RESULTADOS
================================================================================

QUÃ‰ SIGNIFICA CADA MÃ‰TRICA:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  accepted (requests aceptadas)                                          â”‚
â”‚  â†’ NÃºmero de requests que ENTRARON al endpoint                         â”‚
â”‚  â†’ Fueron procesadas normalmente                                       â”‚
â”‚  â†’ Respuesta 200 OK                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  rejected (requests rechazadas)                                         â”‚
â”‚  â†’ NÃºmero de requests que EXCEDIERON el lÃ­mite                         â”‚
â”‚  â†’ Fueron rechazadas inmediatamente                                    â”‚
â”‚  â†’ Respuesta 503 Service Unavailable                                   â”‚
â”‚  â†’ ESTO ES BUENO: Evita colapso del sistema                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  utilizationPercent (porcentaje de utilizaciÃ³n)                         â”‚
â”‚  â†’ (current / limit) * 100                                             â”‚
â”‚  â†’ 100% = LÃ­mite alcanzado, se estÃ¡n rechazando requests              â”‚
â”‚  â†’ 0-50% = Carga normal                                                â”‚
â”‚  â†’ 50-90% = Carga alta pero manejable                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ESCENARIOS Y SU INTERPRETACIÃ“N:

âœ… BULKHEAD FUNCIONANDO CORRECTAMENTE:

  /tasks bombardeado:
    â€¢ accepted: 40-50 requests
    â€¢ rejected: 50-60 requests
    â€¢ utilizationPercent: 100%
    â€¢ P95: 400-600ms

  /projects funcionando normal:
    â€¢ accepted: todas las que llegaron
    â€¢ rejected: 0
    â€¢ utilizationPercent: 5-20%
    â€¢ P95: <500ms

  CONCLUSIÃ“N: El problema en /tasks NO AFECTÃ“ a /projects
               â†’ Aislamiento exitoso âœ…

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âŒ SIN BULKHEAD (Escenario comparativo):

  /tasks bombardeado:
    â€¢ Todas las requests entrarÃ­an al sistema
    â€¢ Pool de BD compartido se saturarÃ­a
    â€¢ Latencias altÃ­simas (>5000ms)
    â€¢ Posibles timeouts

  /projects afectado:
    â€¢ TambiÃ©n experimentarÃ­a alta latencia
    â€¢ Errores de timeout en BD
    â€¢ utilizationPercent: 100% (compartiendo recursos)

  CONCLUSIÃ“N: El problema en /tasks AFECTARÃA a /projects
               â†’ Sistema completo degradado âŒ


================================================================================
7. EVIDENCIA PARA LA TFU
================================================================================

CAPTURAS/OUTPUTS RECOMENDADOS:

1. CONFIGURACIÃ“N DE BULKHEAD:
   
   Archivo: config.json
   Mostrar la secciÃ³n:
   {
     "bulkhead": {
       "pools": {
         "tasks": { "max": 10, "min": 2 }
       },
       "concurrency": {
         "tasks": 15  â† LÃ­mite que se probÃ³
       }
     }
   }

2. RESULTADO DEL BOMBARDEO:
   
   node tests/stress-test-tasks.js 100 http://localhost:3000
   
   Capturar la salida completa mostrando:
   â€¢ Total de requests: 100
   â€¢ Rechazadas por Bulkhead (503): ~55
   â€¢ Mensaje: "Bulkhead funcionando"

3. MÃ‰TRICAS DE BULKHEAD:
   
   curl http://localhost:3000/bulkhead/metrics
   
   Mostrar los contadores de accepted/rejected para tasks y projects

4. VERIFICACIÃ“N DE /projects:
   
   curl http://localhost:3000/projects
   
   Mostrar que responde 200 OK durante/despuÃ©s del bombardeo

5. LOGS DE LA APLICACIÃ“N:
   
   docker logs gestor_api
   
   Buscar lÃ­neas como:
   "âœ… Pools de Bulkhead inicializados correctamente"
   "ğŸš« [Bulkhead] Request rechazada en tasks: lÃ­mite de 15 alcanzado"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ESTRUCTURA DEL INFORME:

1. INTRODUCCIÃ“N AL PATRÃ“N
   â€¢ DefiniciÃ³n de Bulkhead
   â€¢ Atributo de calidad: Disponibilidad
   â€¢ AnalogÃ­a del barco

2. IMPLEMENTACIÃ“N
   â€¢ Arquitectura con dos niveles
   â€¢ CÃ³digo relevante (middleware, pools)
   â€¢ ConfiguraciÃ³n utilizada

3. CRITERIOS DE RECHAZO
   â€¢ Explicar la lÃ³gica: current >= limit
   â€¢ Por quÃ© se usa 503
   â€¢ Beneficio del rechazo rÃ¡pido

4. VALIDACIÃ“N EMPÃRICA
   â€¢ Procedimiento de prueba
   â€¢ Resultados obtenidos (con capturas)
   â€¢ InterpretaciÃ³n

5. CONCLUSIÃ“N
   â€¢ Bulkhead mejorÃ³ la disponibilidad
   â€¢ Aislamiento comprobado
   â€¢ Sistema mÃ¡s resiliente


================================================================================
RESUMEN EJECUTIVO
================================================================================

Â¿QUÃ‰ ES BULKHEAD?
  â†’ PatrÃ³n que aÃ­sla recursos por mÃ³dulo para contener fallos

Â¿CÃ“MO SE RECHAZA UNA REQUEST?
  â†’ Cuando current >= limit
  â†’ Respuesta: 503 Service Unavailable
  â†’ Rechazo inmediato (rÃ¡pido, no timeout)

Â¿CÃ“MO CORRER?
  â†’ docker-compose up -d

Â¿CÃ“MO PROBAR?
  â†’ node tests/stress-test-tasks.js 100 http://localhost:3000
  â†’ Verificar que /projects siga funcionando

Â¿QUÃ‰ DEMUESTRA?
  â†’ /tasks saturado â†’ Rechaza 55% de requests
  â†’ /projects normal â†’ 0% rechazos
  â†’ Aislamiento exitoso = Disponibilidad mejorada âœ…

ARCHIVOS CLAVE:
  â€¢ src/config/bulkheadPools.ts        â†’ Pools separados
  â€¢ src/middleware/bulkhead.ts         â†’ LÃ³gica de rechazo
  â€¢ config.json                        â†’ ConfiguraciÃ³n de lÃ­mites
  â€¢ tests/stress-test-tasks.js         â†’ Script de prueba
  â€¢ RESULTADOS_BULKHEAD.md            â†’ Evidencia completa

================================================================================
FIN DEL DOCUMENTO
================================================================================
